{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/burha/Desktop/Sakinaaaaa/Will%20you%20be%20my%20Valentine/src/lib/valentines-store.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { createContext, useContext, useCallback, useEffect, useState } from \"react\";\n\n/**\n * Client-side persisted state for the Valentine flow.\n * Persists to sessionStorage under val_state so it survives route changes and refreshes.\n */\nexport type LastChoicePage2 = \"yes\" | \"hell\" | null;\n\nexport interface ValentinesState {\n  points: number;\n  lastChoicePage2: LastChoicePage2;\n}\n\nconst STORAGE_KEY = \"val_state\";\n\nfunction loadState(): ValentinesState {\n  if (typeof window === \"undefined\") {\n    return { points: 0, lastChoicePage2: null };\n  }\n  try {\n    const raw = sessionStorage.getItem(STORAGE_KEY);\n    if (raw) {\n      const parsed = JSON.parse(raw) as ValentinesState;\n      return {\n        points: typeof parsed.points === \"number\" ? parsed.points : 0,\n        lastChoicePage2:\n          parsed.lastChoicePage2 === \"yes\" || parsed.lastChoicePage2 === \"hell\"\n            ? parsed.lastChoicePage2\n            : null,\n      };\n    }\n  } catch {\n    // ignore\n  }\n  return { points: 0, lastChoicePage2: null };\n}\n\nfunction saveState(state: ValentinesState) {\n  if (typeof window === \"undefined\") return;\n  try {\n    sessionStorage.setItem(STORAGE_KEY, JSON.stringify(state));\n  } catch {\n    // ignore\n  }\n}\n\ninterface ValentinesStoreContextValue {\n  points: number;\n  addPoints: (delta: number) => void;\n  setPoints: (value: number) => void;\n  lastChoicePage2: LastChoicePage2;\n  setLastChoicePage2: (choice: LastChoicePage2) => void;\n}\n\nconst ValentinesStoreContext = createContext<ValentinesStoreContextValue | null>(null);\n\n/**\n * Provider that holds points and lastChoicePage2 and persists them to sessionStorage.\n * Wrap the app (or pages that need it) with this provider.\n */\nexport function ValentinesStoreProvider({ children }: { children: React.ReactNode }) {\n  const [state, setState] = useState<ValentinesState>({ points: 0, lastChoicePage2: null });\n  const [hydrated, setHydrated] = useState(false);\n\n  useEffect(() => {\n    setState(loadState());\n    setHydrated(true);\n  }, []);\n\n  useEffect(() => {\n    if (hydrated) saveState(state);\n  }, [hydrated, state]);\n\n  const addPoints = useCallback((delta: number) => {\n    setState((prev) => ({ ...prev, points: prev.points + delta }));\n  }, []);\n\n  const setPoints = useCallback((value: number) => {\n    setState((prev) => ({ ...prev, points: value }));\n  }, []);\n\n  const setLastChoicePage2 = useCallback((choice: LastChoicePage2) => {\n    setState((prev) => ({ ...prev, lastChoicePage2: choice }));\n  }, []);\n\n  const value: ValentinesStoreContextValue = {\n    points: state.points,\n    addPoints,\n    setPoints,\n    lastChoicePage2: state.lastChoicePage2,\n    setLastChoicePage2,\n  };\n\n  return (\n    <ValentinesStoreContext.Provider value={value}>\n      {children}\n    </ValentinesStoreContext.Provider>\n  );\n}\n\nexport function useValentinesStore() {\n  const ctx = useContext(ValentinesStoreContext);\n  if (!ctx) {\n    throw new Error(\"useValentinesStore must be used within ValentinesStoreProvider\");\n  }\n  return ctx;\n}\n"],"names":[],"mappings":";;;;;;;AAEA;AAFA;;;AAeA,MAAM,cAAc;AAEpB,SAAS;IACP,wCAAmC;QACjC,OAAO;YAAE,QAAQ;YAAG,iBAAiB;QAAK;IAC5C;;;AAiBF;AAEA,SAAS,UAAU,KAAsB;IACvC,wCAAmC;;;AAMrC;AAUA,MAAM,uCAAyB,IAAA,sNAAa,EAAqC;AAM1E,SAAS,wBAAwB,EAAE,QAAQ,EAAiC;IACjF,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAkB;QAAE,QAAQ;QAAG,iBAAiB;IAAK;IACvF,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;IAEzC,IAAA,kNAAS,EAAC;QACR,SAAS;QACT,YAAY;IACd,GAAG,EAAE;IAEL,IAAA,kNAAS,EAAC;QACR,IAAI,UAAU,UAAU;IAC1B,GAAG;QAAC;QAAU;KAAM;IAEpB,MAAM,YAAY,IAAA,oNAAW,EAAC,CAAC;QAC7B,SAAS,CAAC,OAAS,CAAC;gBAAE,GAAG,IAAI;gBAAE,QAAQ,KAAK,MAAM,GAAG;YAAM,CAAC;IAC9D,GAAG,EAAE;IAEL,MAAM,YAAY,IAAA,oNAAW,EAAC,CAAC;QAC7B,SAAS,CAAC,OAAS,CAAC;gBAAE,GAAG,IAAI;gBAAE,QAAQ;YAAM,CAAC;IAChD,GAAG,EAAE;IAEL,MAAM,qBAAqB,IAAA,oNAAW,EAAC,CAAC;QACtC,SAAS,CAAC,OAAS,CAAC;gBAAE,GAAG,IAAI;gBAAE,iBAAiB;YAAO,CAAC;IAC1D,GAAG,EAAE;IAEL,MAAM,QAAqC;QACzC,QAAQ,MAAM,MAAM;QACpB;QACA;QACA,iBAAiB,MAAM,eAAe;QACtC;IACF;IAEA,qBACE,8OAAC,uBAAuB,QAAQ;QAAC,OAAO;kBACrC;;;;;;AAGP;AAEO,SAAS;IACd,MAAM,MAAM,IAAA,mNAAU,EAAC;IACvB,IAAI,CAAC,KAAK;QACR,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT","debugId":null}},
    {"offset": {"line": 99, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/burha/Desktop/Sakinaaaaa/Will%20you%20be%20my%20Valentine/src/components/HeartTrail.tsx"],"sourcesContent":["\"use client\";\n\nimport { useCallback, useEffect, useRef, useState } from \"react\";\nimport { motion } from \"framer-motion\";\n\nconst THROTTLE_MS = 60;\nconst FADE_DURATION = 2.5;\nconst MAX_HEARTS = 28;\nconst HEART_SIZE = 18;\n\n/**\n * Single heart in the trail: small SVG heart that fades out and is then removed.\n */\nfunction TrailHeart({\n  id,\n  x,\n  y,\n  onComplete,\n}: {\n  id: number;\n  x: number;\n  y: number;\n  onComplete: (id: number) => void;\n}) {\n  return (\n    <motion.div\n      className=\"absolute pointer-events-none\"\n      style={{\n        left: x,\n        top: y,\n        width: HEART_SIZE,\n        height: HEART_SIZE,\n        transform: \"translate(-50%, -50%)\",\n      }}\n      initial={{ opacity: 0.9, scale: 0.8 }}\n      animate={{ opacity: 0, scale: 1.1 }}\n      transition={{\n        duration: FADE_DURATION,\n        ease: \"easeOut\",\n      }}\n      onAnimationComplete={() => onComplete(id)}\n    >\n      <svg\n        viewBox=\"0 0 24 24\"\n        className=\"w-full h-full drop-shadow-sm\"\n        aria-hidden\n      >\n        <path\n          fill=\"#e63950\"\n          stroke=\"#1a0a0a\"\n          strokeWidth=\"1\"\n          strokeLinejoin=\"round\"\n          d=\"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z\"\n        />\n      </svg>\n    </motion.div>\n  );\n}\n\n/**\n * Renders a short trail of hearts that follow the mouse and fade out over 2â€“3 seconds.\n * Shown on all pages; respects prefers-reduced-motion.\n */\nexport function HeartTrail() {\n  const [hearts, setHearts] = useState<Array<{ id: number; x: number; y: number }>>([]);\n  const [reducedMotion, setReducedMotion] = useState(false);\n  const lastMoveRef = useRef(0);\n  const idRef = useRef(0);\n\n  useEffect(() => {\n    const mq = window.matchMedia(\"(prefers-reduced-motion: reduce)\");\n    setReducedMotion(mq.matches);\n    const handler = () => setReducedMotion(mq.matches);\n    mq.addEventListener(\"change\", handler);\n    return () => mq.removeEventListener(\"change\", handler);\n  }, []);\n\n  const addHeart = useCallback((clientX: number, clientY: number) => {\n    const id = ++idRef.current;\n    setHearts((prev) => {\n      const next = [...prev, { id, x: clientX, y: clientY }];\n      if (next.length > MAX_HEARTS) return next.slice(-MAX_HEARTS);\n      return next;\n    });\n  }, []);\n\n  const removeHeart = useCallback((id: number) => {\n    setHearts((prev) => prev.filter((h) => h.id !== id));\n  }, []);\n\n  useEffect(() => {\n    if (reducedMotion) return;\n\n    const handleMove = (e: MouseEvent) => {\n      const now = Date.now();\n      if (now - lastMoveRef.current < THROTTLE_MS) return;\n      lastMoveRef.current = now;\n      addHeart(e.clientX, e.clientY);\n    };\n\n    window.addEventListener(\"mousemove\", handleMove, { passive: true });\n    return () => window.removeEventListener(\"mousemove\", handleMove);\n  }, [reducedMotion, addHeart]);\n\n  if (reducedMotion) return null;\n\n  return (\n    <div\n      className=\"fixed inset-0 pointer-events-none z-[9999]\"\n      aria-hidden\n    >\n      {hearts.map((h) => (\n        <TrailHeart\n          key={h.id}\n          id={h.id}\n          x={h.x}\n          y={h.y}\n          onComplete={removeHeart}\n        />\n      ))}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAKA,MAAM,cAAc;AACpB,MAAM,gBAAgB;AACtB,MAAM,aAAa;AACnB,MAAM,aAAa;AAEnB;;CAEC,GACD,SAAS,WAAW,EAClB,EAAE,EACF,CAAC,EACD,CAAC,EACD,UAAU,EAMX;IACC,qBACE,8OAAC,oMAAM,CAAC,GAAG;QACT,WAAU;QACV,OAAO;YACL,MAAM;YACN,KAAK;YACL,OAAO;YACP,QAAQ;YACR,WAAW;QACb;QACA,SAAS;YAAE,SAAS;YAAK,OAAO;QAAI;QACpC,SAAS;YAAE,SAAS;YAAG,OAAO;QAAI;QAClC,YAAY;YACV,UAAU;YACV,MAAM;QACR;QACA,qBAAqB,IAAM,WAAW;kBAEtC,cAAA,8OAAC;YACC,SAAQ;YACR,WAAU;YACV,aAAW;sBAEX,cAAA,8OAAC;gBACC,MAAK;gBACL,QAAO;gBACP,aAAY;gBACZ,gBAAe;gBACf,GAAE;;;;;;;;;;;;;;;;AAKZ;AAMO,SAAS;IACd,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAA8C,EAAE;IACpF,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,iNAAQ,EAAC;IACnD,MAAM,cAAc,IAAA,+MAAM,EAAC;IAC3B,MAAM,QAAQ,IAAA,+MAAM,EAAC;IAErB,IAAA,kNAAS,EAAC;QACR,MAAM,KAAK,OAAO,UAAU,CAAC;QAC7B,iBAAiB,GAAG,OAAO;QAC3B,MAAM,UAAU,IAAM,iBAAiB,GAAG,OAAO;QACjD,GAAG,gBAAgB,CAAC,UAAU;QAC9B,OAAO,IAAM,GAAG,mBAAmB,CAAC,UAAU;IAChD,GAAG,EAAE;IAEL,MAAM,WAAW,IAAA,oNAAW,EAAC,CAAC,SAAiB;QAC7C,MAAM,KAAK,EAAE,MAAM,OAAO;QAC1B,UAAU,CAAC;YACT,MAAM,OAAO;mBAAI;gBAAM;oBAAE;oBAAI,GAAG;oBAAS,GAAG;gBAAQ;aAAE;YACtD,IAAI,KAAK,MAAM,GAAG,YAAY,OAAO,KAAK,KAAK,CAAC,CAAC;YACjD,OAAO;QACT;IACF,GAAG,EAAE;IAEL,MAAM,cAAc,IAAA,oNAAW,EAAC,CAAC;QAC/B,UAAU,CAAC,OAAS,KAAK,MAAM,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;IAClD,GAAG,EAAE;IAEL,IAAA,kNAAS,EAAC;QACR,IAAI,eAAe;QAEnB,MAAM,aAAa,CAAC;YAClB,MAAM,MAAM,KAAK,GAAG;YACpB,IAAI,MAAM,YAAY,OAAO,GAAG,aAAa;YAC7C,YAAY,OAAO,GAAG;YACtB,SAAS,EAAE,OAAO,EAAE,EAAE,OAAO;QAC/B;QAEA,OAAO,gBAAgB,CAAC,aAAa,YAAY;YAAE,SAAS;QAAK;QACjE,OAAO,IAAM,OAAO,mBAAmB,CAAC,aAAa;IACvD,GAAG;QAAC;QAAe;KAAS;IAE5B,IAAI,eAAe,OAAO;IAE1B,qBACE,8OAAC;QACC,WAAU;QACV,aAAW;kBAEV,OAAO,GAAG,CAAC,CAAC,kBACX,8OAAC;gBAEC,IAAI,EAAE,EAAE;gBACR,GAAG,EAAE,CAAC;gBACN,GAAG,EAAE,CAAC;gBACN,YAAY;eAJP,EAAE,EAAE;;;;;;;;;;AASnB","debugId":null}}]
}